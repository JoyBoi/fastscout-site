---
export const prerender = true;

import Layout from "../../shared/Layout.astro";
import { locales, getLocaleFromUrl, useTranslations } from "../../i18n";

export function getStaticPaths() {
  return locales.map(locale => ({ params: { locale } }));
}

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);
const localePath = (path: string) => `/${locale}${path}`;
---

<Layout title="FastScout Bridge" locale={locale}>
  <!-- Hero Section -->
  <section class="container section" style="padding-top: 60px; text-align: center;">
    <div class="animate-enter">
        <span class="badge" style="margin-bottom: 24px; display: inline-block;">{t.extension.badge}</span>
        <h1 style="font-size: clamp(40px, 5vw, 64px); font-weight: 800; line-height: 1.1; margin-bottom: 24px; letter-spacing: -1px;">
          FastScout <span class="text-gradient">{t.extension.bridge}</span>
        </h1>
        <p class="lead" style="margin: 0 auto 40px; max-width: 600px;">
          {t.extension.lead}
        </p>

        <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
            <a href="#" class="btn btn-primary" style="padding: 12px 32px; font-size: 1.1rem;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-1.07 3.97-2.9 5.34z"/></svg>
                {t.extension.ctaAdd}
            </a>
            <a href={localePath("/auth?mode=signup")} class="btn btn-outline" style="padding: 12px 32px; font-size: 1.1rem;" data-cta="guest">
              {t.extension.ctaAccount}
            </a>
        </div>
        
        <p class="muted" style="margin-top: 16px; font-size: 14px;" data-cta="guest">
            {t.extension.req}
        </p>
    </div>
  </section>

  <!-- Supported Platforms -->
  <section class="container section">
    <div style="text-align: center; margin-bottom: 40px;">
      <h2 style="font-size: 24px; font-weight: 700;">{t.extension.platforms.title}</h2>
    </div>
    <div style="display: flex; justify-content: center; gap: 40px; flex-wrap: wrap; opacity: 0.7;">
      <div style="font-weight: 700; font-size: 20px; color: var(--color-text);">Auto1</div>
      <div style="font-weight: 700; font-size: 20px; color: var(--color-text);">CarCollect</div>
      <div style="font-weight: 700; font-size: 20px; color: var(--color-text);">FastBack Trade</div>
    </div>
  </section>

  <!-- Features Grid -->
  <section class="container section">
    <div class="grid grid-3">
        <div class="card">
            <div style="width: 48px; height: 48px; background: #F1F5F9; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; font-size: 24px;">üëÄ</div>
            <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 8px;">{t.extension.features.detection.title}</h3>
            <p class="muted">{t.extension.features.detection.description}</p>
        </div>
         <div class="card">
            <div style="width: 48px; height: 48px; background: #F1F5F9; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; font-size: 24px;">üöÄ</div>
            <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 8px;">{t.extension.features.search.title}</h3>
            <p class="muted">{t.extension.features.search.description}</p>
        </div>
         <div class="card">
            <div style="width: 48px; height: 48px; background: #F1F5F9; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; font-size: 24px;">‚öôÔ∏è</div>
            <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 8px;">{t.extension.features.settings.title}</h3>
            <p class="muted">{t.extension.features.settings.description}</p>
        </div>
    </div>
  </section>

  <!-- How It Works -->
  <section class="container section">
    <h2 style="text-align: center; font-size: 32px; font-weight: 800; margin-bottom: 60px;">{t.extension.steps.title}</h2>
    
    <div class="steps-grid">
      <div class="step-card">
        <div class="step-number">1</div>
        <h3>{t.extension.steps.step1.title}</h3>
        <p class="muted">{t.extension.steps.step1.description}</p>
      </div>
      <div class="step-card">
        <div class="step-number">2</div>
        <h3>{t.extension.steps.step2.title}</h3>
        <p class="muted">{t.extension.steps.step2.description}</p>
      </div>
      <div class="step-card">
        <div class="step-number">3</div>
        <h3>{t.extension.steps.step3.title}</h3>
        <p class="muted">{t.extension.steps.step3.description}</p>
      </div>
      <div class="step-card">
        <div class="step-number">4</div>
        <h3>{t.extension.steps.step4.title}</h3>
        <p class="muted">{t.extension.steps.step4.description}</p>
      </div>
    </div>
  </section>
  <style>
    .steps-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 24px;
    }
    
    .step-card {
      position: relative;
      background: white;
      border: 1px solid var(--color-border);
      border-radius: 16px;
      padding: 32px 24px;
      text-align: center;
      transition: transform 0.3s ease;
    }

    .step-card:hover {
      transform: translateY(-5px);
       box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.05);
    }

    .step-number {
      width: 40px;
      height: 40px;
      background: var(--gradient-primary);
      color: white;
      font-weight: 700;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      font-size: 18px;
    }

    .step-card h3 {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    @media (max-width: 768px) {
      .steps-grid { grid-template-columns: 1fr; }
    }
  </style>

  <script>
    // Client-side auth detection for prerendered pages
    function checkAuthState() {
      const hasAuthCookie = document.cookie.includes('sb-');
      const hasLocalStorage = typeof localStorage !== 'undefined' && 
        Object.keys(localStorage).some(k => k.startsWith('sb-'));
      
      const isSignedIn = hasAuthCookie || hasLocalStorage;
      
      document.querySelectorAll('[data-cta="guest"]').forEach(el => {
        (el as HTMLElement).style.display = isSignedIn ? 'none' : '';
      });
    }
    
    document.addEventListener('DOMContentLoaded', checkAuthState);
    document.addEventListener('astro:page-load', checkAuthState);
  </script>
</Layout>
