---
export const prerender = false;

import Layout from "../../shared/Layout.astro";
import { locales, getLocaleFromUrl, useTranslations, type Locale } from "../../i18n";
import { getSupabaseServerClient } from "../../lib/supabase";



const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);

const supabase = getSupabaseServerClient(Astro);
const { data } = await supabase.auth.getUser();
const signedIn = !!data.user;

const localePath = (path: string) => `/${locale}${path}`;
---

<Layout title="FastScout - Surf Faster, Work Smarter" locale={locale}>
  <!-- Background Glow Effects -->
  <div class="glow-orb" style="top: -10%; right: -10%; width: 800px; height: 800px; background: radial-gradient(circle, rgba(59, 130, 246, 0.08) 0%, transparent 70%); filter: blur(60px); position: absolute; z-index: -1;"></div>
  <div class="glow-orb" style="top: 20%; left: -10%; width: 600px; height: 600px; background: radial-gradient(circle, rgba(139, 92, 246, 0.08) 0%, transparent 70%); filter: blur(60px); position: absolute; z-index: -1;"></div>

  <section class="container section" style="padding-top: 80px; text-align: center;">
    <div class="animate-enter">
      <!-- Version Pill -->
      <div style="display: inline-flex; align-items: center; gap: 8px; padding: 6px 16px; background: rgba(255,255,255,0.8); border: 1px solid var(--color-border); border-radius: 100px; margin-bottom: 24px; box-shadow: var(--shadow-sm);">
        <span style="display: block; width: 8px; height: 8px; background: #22c55e; border-radius: 50%; box-shadow: 0 0 8px rgba(34, 197, 94, 0.4);"></span>
        <span style="font-size: 13px; font-weight: 600; color: var(--color-text-muted); letter-spacing: 0.5px;">{t.home.badge}</span>
      </div>

      <h1 style="font-size: clamp(48px, 6vw, 80px); font-weight: 800; line-height: 1.1; margin-bottom: 24px; letter-spacing: -2px; color: var(--color-text);">
        {t.home.hero.title1}<br />
        <span style="background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">{t.home.hero.title2}</span>
      </h1>

      <p style="font-size: 18px; color: var(--color-text-muted); max-width: 540px; margin: 0 auto 40px; line-height: 1.6;">
        {t.home.hero.subtitle}
      </p>

      <div style="display: flex; gap: 16px; justify-content: center; margin-bottom: 60px;">
        {
          signedIn ? (
            <>
              <a href={localePath('/dashboard')} class="btn btn-primary" style="min-width: 160px; height: 48px;">{t.home.hero.ctaDashboard}</a>
              <a href={localePath('/pricing')} class="btn btn-outline" style="min-width: 160px; height: 48px;">{t.home.hero.ctaViewPlans}</a>
            </>
          ) : (
            <>
              <a href={localePath('/pricing')} class="btn btn-primary" style="min-width: 160px; height: 48px;">{t.home.hero.ctaGetStarted}</a>
              <a href={localePath('/auth?mode=signin')} class="btn btn-outline" style="min-width: 160px; height: 48px;">{t.home.hero.ctaSignIn}</a>
            </>
          )
        }
      </div>

      <div class="animate-enter stagger-1" style="margin-bottom: 40px; position: relative; opacity: 0.9;">
        <div style="position: absolute; width: 100%; height: 100%; background: radial-gradient(closest-side, rgba(37, 99, 235, 0.15) 0%, transparent 100%); filter: blur(40px); z-index: -1;"></div>
        <img src="/hero-car.png" alt="FastScout Preview" style="width: 100%; max-width: 480px; height: auto; border-radius: 12px; mask-image: linear-gradient(to bottom, black 50%, transparent 100%); -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);" />
      </div>
    </div>

    <!-- Supported Sites Pill -->
    <div class="animate-enter stagger-1" style="display: inline-flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 24px; padding: 16px 32px; background: rgba(255, 255, 255, 0.6); border: 1px solid var(--color-border); border-radius: 20px; backdrop-filter: blur(10px); box-shadow: var(--shadow-sm);">
      <span style="font-size: 13px; font-weight: 700; color: var(--color-text-muted); text-transform: uppercase; letter-spacing: 1px;">{t.home.worksOn}</span>
      <a href="https://www.auto1.com" target="_blank" rel="noreferrer" style="opacity: 0.8; hover:opacity: 1; transition: all 0.2s; color: var(--color-text); font-weight: 600; display: flex; align-items: center; gap: 6px;">
        Auto1
      </a>
      <div style="width: 1px; height: 16px; background: var(--color-border);"></div>
      <a href="https://www.carcollect.com" target="_blank" rel="noreferrer" style="opacity: 0.8; hover:opacity: 1; transition: all 0.2s; color: var(--color-text); font-weight: 600;">CarCollect</a>
      <div style="width: 1px; height: 16px; background: var(--color-border);"></div>
      <a href="https://www.fastback-trade.com" target="_blank" rel="noreferrer" style="opacity: 0.8; hover:opacity: 1; transition: all 0.2s; color: var(--color-text); font-weight: 600;">Fastback</a>
    </div>

  </section>

  <!-- Features Grid -->
  <section class="container animate-enter stagger-2" style="margin-bottom: 120px;">
    <div class="grid grid-3">
      <!-- Feature 1 -->
      <div class="card">
        <div style="width: 48px; height: 48px; border-radius: 12px; background: rgba(37, 99, 235, 0.1); display: flex; align-items: center; justify-content: center; margin-bottom: 24px; color: var(--color-primary);">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
        </div>
        <h3 style="font-size: 20px; font-weight: 700; margin: 0 0 12px; color: var(--color-text);">{t.home.features.quickBid.title}</h3>
        <p style="font-size: 15px; color: var(--color-text-muted); line-height: 1.6; margin: 0;">
          {t.home.features.quickBid.description}
        </p>
      </div>

      <!-- Feature 2 -->
      <div class="card">
        <div style="width: 48px; height: 48px; border-radius: 12px; background: rgba(124, 58, 237, 0.1); display: flex; align-items: center; justify-content: center; margin-bottom: 24px; color: #7c3aed;">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        </div>
        <h3 style="font-size: 20px; font-weight: 700; margin: 0 0 12px; color: var(--color-text);">{t.home.features.search.title}</h3>
        <p style="font-size: 15px; color: var(--color-text-muted); line-height: 1.6; margin: 0;">
          {t.home.features.search.description}
        </p>
      </div>

      <!-- Feature 3 -->
      <div class="card">
        <div style="width: 48px; height: 48px; border-radius: 12px; background: rgba(34, 197, 94, 0.1); display: flex; align-items: center; justify-content: center; margin-bottom: 24px; color: #16a34a;">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
        </div>
        <h3 style="font-size: 20px; font-weight: 700; margin: 0 0 12px; color: var(--color-text);">{t.home.features.capture.title}</h3>
        <p style="font-size: 15px; color: var(--color-text-muted); line-height: 1.6; margin: 0;">
          {t.home.features.capture.description}
        </p>
      </div>
    </div>
  </section>
</Layout>
